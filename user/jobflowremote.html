
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Jobflow-remote setup &#8212; autoplex</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/autodoc_pydantic.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=cea41077" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../_static/documentation_options.js?v=db82181a"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'user/jobflowremote';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="0.0.17.post14+gae97d6bc" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/autoplex_logo.png" class="logo__image only-light" alt="autoplex - Home"/>
    <img src="../_static/autoplex_logo.png" class="logo__image only-dark pst-js-only" alt="autoplex - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="index.html">Getting started</a></li>



<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="tutorials.html">Tutorials</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="flows/flows.html">Out of the box workflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="generation/data.html">Generating reference data</a></li>
<li class="toctree-l2"><a class="reference internal" href="fitting/fitting.html">Fitting potentials</a></li>
<li class="toctree-l2"><a class="reference internal" href="benchmark/benchmark.html">Benchmark</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../reference/index.html">API reference</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/autoplex.auto.html">autoplex.auto</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/autoplex.auto.phonons.html">autoplex.auto.phonons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.auto.phonons.flows.html">autoplex.auto.phonons.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.auto.phonons.jobs.html">autoplex.auto.phonons.jobs</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/autoplex.auto.rss.html">autoplex.auto.rss</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/autoplex.benchmark.html">autoplex.benchmark</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/autoplex.benchmark.phonons.html">autoplex.benchmark.phonons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.benchmark.phonons.flows.html">autoplex.benchmark.phonons.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.benchmark.phonons.jobs.html">autoplex.benchmark.phonons.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.benchmark.phonons.utils.html">autoplex.benchmark.phonons.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/autoplex.benchmark.rss.html">autoplex.benchmark.rss</a></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/autoplex.data.html">autoplex.data</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/autoplex.data.common.html">autoplex.data.common</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.common.flows.html">autoplex.data.common.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.common.jobs.html">autoplex.data.common.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.common.utils.html">autoplex.data.common.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/autoplex.data.phonons.html">autoplex.data.phonons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.phonons.flows.html">autoplex.data.phonons.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.phonons.jobs.html">autoplex.data.phonons.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.phonons.utils.html">autoplex.data.phonons.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/autoplex.data.rss.html">autoplex.data.rss</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.rss.flows.html">autoplex.data.rss.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.rss.jobs.html">autoplex.data.rss.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.data.rss.utils.html">autoplex.data.rss.utils</a></li>
</ul>
</details></li>
</ul>
</details></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../reference/autoplex.fitting.html">autoplex.fitting</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/autoplex.fitting.common.html">autoplex.fitting.common</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.fitting.common.flows.html">autoplex.fitting.common.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.fitting.common.jobs.html">autoplex.fitting.common.jobs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.fitting.common.regularization.html">autoplex.fitting.common.regularization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.fitting.common.utils.html">autoplex.fitting.common.utils</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/autoplex.fitting.phonons.html">autoplex.fitting.phonons</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.fitting.phonons.flows.html">autoplex.fitting.phonons.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.fitting.phonons.jobs.html">autoplex.fitting.phonons.jobs</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../reference/autoplex.fitting.rss.html">autoplex.fitting.rss</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.fitting.rss.flows.html">autoplex.fitting.rss.flows</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/autoplex.fitting.rss.jobs.html">autoplex.fitting.rss.jobs</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Contributing Guide</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../dev/dev_install.html">Developer Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/contributing.html">Guidelines for contributions to autoplex</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../about/contributors.html">Contributors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/license.html">License</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/JaGeo/autoplex" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/JaGeo/autoplex/issues/new?title=Issue%20on%20page%20%2Fuser/jobflowremote.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/user/jobflowremote.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Jobflow-remote setup</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Jobflow-remote setup</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#on-your-local-machine">on your local machine</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#on-your-remote-cluster">on your remote cluster</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-to-be-done-in-the-config-file-on-your-local-machine">Changes to be done in the config file - on your local machine</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#check-if-your-setup-works-correctly">Check if your setup works correctly</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">Getting started</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#example-job-scripts-to-test-add-submit-jobs-to-db-from-your-local-machine">Example job scripts to test (Add/Submit jobs to DB from your local machine)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-python-job">Simple Python job</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vasp-relax-job-using-atomate2-workflow">VASP relax job using atomate2 workflow</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-different-workers-for-different-job-types">Setting different workers for different job types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#querying-completed-jobs-from-db-using-jobflow-remote-python-api">Querying completed jobs from DB using jobflow-remote Python API</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-failed-jobs-time-limit-or-execution-config">Updating failed jobs time limit or execution config</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#update-pre-exsiting-job-input-parameters-in-the-db">Update pre-exsiting job input parameters in the DB</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#some-useful-commands">Some useful commands</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#some-useful-links">Some useful links</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <p><em>Tutorial written by <a class="reference external" href="mailto:aakash&#46;naik&#37;&#52;&#48;bam&#46;de">Aakash Naik</a> and
<a class="reference external" href="mailto:christina&#46;ertural&#37;&#52;&#48;bam&#46;de">Christina Ertural</a> with feedback from
<a class="reference external" href="mailto:jonas&#46;grandel&#37;&#52;&#48;bam&#46;de">Jonas Grandel</a>.</em></p>
<section class="tex2jax_ignore mathjax_ignore" id="jobflow-remote-setup">
<h1>Jobflow-remote setup<a class="headerlink" href="#jobflow-remote-setup" title="Link to this heading">#</a></h1>
<p>This will result in a setup for automation where</p>
<ol class="arabic simple">
<li><p>We will add/submit job to DB on your local machine.</p></li>
<li><p>Jobs will be executed on your remote custer.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h1>
<section id="on-your-local-machine">
<h2>on your local machine<a class="headerlink" href="#on-your-local-machine" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Create a new env &gt; <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">create</span> <span class="pre">-n</span> <span class="pre">autoplex</span> <span class="pre">python=3.10</span></code>. (You can choose any other env name.)</p></li>
<li><p>Activate your env &gt; <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">autoplex</span></code></p></li>
<li><p>Install jobflow-remote by <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">git+https://github.com/Matgenix/jobflow-remote&#64;v0.1.2</span></code>.</p></li>
<li><p>You can check for the latest release of <a class="reference external" href="https://github.com/Matgenix/jobflow-remote/releases">jobflow-remote</a>.</p></li>
<li><p>Install autoplex &gt; In your local autoplex directory: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-e</span> <span class="pre">.[strict]</span></code>.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">project</span> <span class="pre">generate</span> <span class="pre">--full</span> <span class="pre">YOUR_PROJECT_NAME</span></code>.
Choose a sensible project name.
This will generate an empty project config file in your home directory.
You can find this file inside <code class="docutils literal notranslate"><span class="pre">~/.jfremote</span></code>
(This is optional, a config file is provided here: <a class="reference download internal" download="" href="../_downloads/a4843ae081656414b03cd78a238508a0/test_project.yaml"><span class="xref download myst">test_project.yaml</span></a>,
you can simply copy this file to the  <code class="docutils literal notranslate"><span class="pre">~/.jfremote</span></code> directory.
You will need to create <code class="docutils literal notranslate"><span class="pre">~/.jfremote</span></code> directory in your home if it’s not created automatically.
Creat the log, tmp and daemon subfolders if they are not created automatically.)</p></li>
</ol>
</section>
<section id="on-your-remote-cluster">
<h2>on your remote cluster<a class="headerlink" href="#on-your-remote-cluster" title="Link to this heading">#</a></h2>
<ol class="arabic simple" start="7">
<li><p>Repeat step 1,2,3,4 and 5 on your remote cluster.</p></li>
<li><p>Now setup atomate2 config as usual.
Just <code class="docutils literal notranslate"><span class="pre">atomate2/config/atomate2.yaml</span></code>. (We do not need to set up jobflow.yaml in atomate2/config)</p></li>
</ol>
<p>Below is an example <code class="docutils literal notranslate"><span class="pre">atomate2.yaml</span></code> config file</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">VASP_CMD</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">your hpc vasp_std cmd</span>
<span class="nt">VASP_GAMMA_CMD</span><span class="p">:</span><span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">your hpc vasp_gam cmd</span>
<span class="nt">LOBSTER_CMD</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">your hpc lobster cmd</span>
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li><p>Add environment variable to your ~/.bashrc <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">ATOMATE2_CONFIG_FILE=&quot;/path/to/atomate2/config/atomate2.yaml&quot;</span></code></p></li>
</ol>
</section>
<section id="changes-to-be-done-in-the-config-file-on-your-local-machine">
<h2>Changes to be done in the config file - on your local machine<a class="headerlink" href="#changes-to-be-done-in-the-config-file-on-your-local-machine" title="Link to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Set paths to base, tmp, log, daemon dir. Best would be, simply creating empty dirs in your <code class="docutils literal notranslate"><span class="pre">~/.jfremote</span></code> directory.
Use the paths as provided in sample config file for reference.</p></li>
<li><p>Under the <code class="docutils literal notranslate"><span class="pre">workers</span></code> section of the yaml, change worker name from <code class="docutils literal notranslate"><span class="pre">example_worker</span></code> to your liking, set <code class="docutils literal notranslate"><span class="pre">work_dir</span></code>
(directory where calcs will be run), set <code class="docutils literal notranslate"><span class="pre">pre_run</span></code> command (use to activate the environment before job execution),
set <code class="docutils literal notranslate"><span class="pre">user</span></code> (this your username on your remote cluster)</p></li>
<li><p>In <code class="docutils literal notranslate"><span class="pre">queue</span></code> section, just change details as per your MongoDB (admin username password, host, port, name)</p></li>
</ol>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="check-if-your-setup-works-correctly">
<h1>Check if your setup works correctly<a class="headerlink" href="#check-if-your-setup-works-correctly" title="Link to this heading">#</a></h1>
<blockquote>
<div><p>Note: If you have any password protected key in your <code class="docutils literal notranslate"><span class="pre">~/.ssh</span></code> directory worker might fail to start. To overcome this, temporarily move your passphrase procted keys from <code class="docutils literal notranslate"><span class="pre">~/.ssh</span></code> directory to some other directory before starting the runner.</p>
</div></blockquote>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">project</span> <span class="pre">check</span> <span class="pre">-w</span> <span class="pre">example_worker</span></code>
(If everything is setup correctly, you will get asked for password and OTP (one-time password) for MFA (multifactor
authentication) login and will exit with a green tick in few secs.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">project</span> <span class="pre">check</span> <span class="pre">--errors</span></code> this will check all even your MongoDB connection is proper or not.
If anything fails, please check the config file.</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">admin</span> <span class="pre">reset</span></code> (Do not worry, this will reset your DB, necessary to do only once.
You can skip this if you want to keep the data in your DB.)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">runner</span> <span class="pre">start</span> <span class="pre">-s</span> <span class="pre">-i</span></code></p></li>
</ol>
<p>You can type <code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">runner</span> <span class="pre">start</span> <span class="pre">-h</span></code> for help and more information:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">(</span>conda_env<span class="o">)</span><span class="w"> </span>user@local_host:~$<span class="w"> </span>jf<span class="w"> </span>runner<span class="w"> </span>start<span class="w"> </span>-h
The<span class="w"> </span>selected<span class="w"> </span>project<span class="w"> </span>is<span class="w"> </span>test_pproject<span class="w"> </span>from<span class="w"> </span>config<span class="w"> </span>file<span class="w"> </span>/home/user/.jfremote/test_project.yaml
<span class="w">                                                                                                                                                                               </span>
<span class="w"> </span>Usage:<span class="w"> </span>jf<span class="w"> </span>runner<span class="w"> </span>start<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span><span class="w">                                                                                                                                              </span>
<span class="w">                                                                                                                                                                               </span>
<span class="w"> </span>Start<span class="w"> </span>the<span class="w"> </span>Runner<span class="w"> </span>as<span class="w"> </span>a<span class="w"> </span>daemon<span class="w">                                                                                                                                                  </span>
<span class="w">                                                                                                                                                                               </span>
╭─<span class="w"> </span>Options<span class="w"> </span>───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╮
│<span class="w"> </span>--transfer<span class="w">             </span>-t<span class="w">        </span>INTEGER<span class="w">                  </span>The<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>processes<span class="w"> </span>dedicated<span class="w"> </span>to<span class="w"> </span>completing<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">1</span><span class="o">]</span><span class="w">                                                     </span>│
│<span class="w"> </span>--complete<span class="w">             </span>-com<span class="w">      </span>INTEGER<span class="w">                  </span>The<span class="w"> </span>number<span class="w"> </span>of<span class="w"> </span>processes<span class="w"> </span>dedicated<span class="w"> </span>to<span class="w"> </span>completing<span class="w"> </span><span class="nb">jobs</span><span class="w"> </span><span class="o">[</span>default:<span class="w"> </span><span class="m">1</span><span class="o">]</span><span class="w">                                                     </span>│
│<span class="w"> </span>--single<span class="w">               </span>-s<span class="w">  </span>&lt;---<span class="w">                           </span>Use<span class="w"> </span>a<span class="w"> </span>single<span class="w"> </span>process<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>runner<span class="w">                                                                                   </span>│
│<span class="w"> </span>--log-level<span class="w">            </span>-log<span class="w">      </span><span class="o">[</span>error<span class="p">|</span>warn<span class="p">|</span>info<span class="p">|</span>debug<span class="o">]</span><span class="w">  </span>Set<span class="w"> </span>the<span class="w"> </span>log<span class="w"> </span>level<span class="w"> </span>of<span class="w"> </span>the<span class="w"> </span>runner<span class="w"> </span><span class="o">[</span>default:<span class="w"> </span>info<span class="o">]</span><span class="w">                                                                       </span>│
│<span class="w"> </span>--connect-interactive<span class="w">  </span>-i<span class="w">  </span>&lt;---<span class="w">                           </span>Wait<span class="w"> </span><span class="k">for</span><span class="w"> </span>the<span class="w"> </span>daemon<span class="w"> </span>to<span class="w"> </span>start<span class="w"> </span>and<span class="w"> </span>manually<span class="w"> </span>log<span class="w"> </span><span class="k">in</span><span class="w"> </span>the<span class="w"> </span>connection<span class="w"> </span><span class="k">for</span><span class="w"> </span>interactive<span class="w"> </span>remote<span class="w"> </span>host.<span class="w"> </span>Requires<span class="w"> </span>--single.<span class="w">       </span>│
│<span class="w"> </span>--help<span class="w">                 </span>-h<span class="w">                                 </span>Show<span class="w"> </span>this<span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span>exit.<span class="w">                                                                                           </span>│
╰─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯
</pre></div>
</div>
<p>We need to use the options <code class="docutils literal notranslate"><span class="pre">-s</span> <span class="pre">-i</span></code> for the interactive mode to use the MFA login with OTP.
The two options are highlighted by <code class="docutils literal notranslate"><span class="pre">&lt;---</span></code> in the above example.</p>
<p>You will be prompted with a question “Do you want to open the connection for the host of the XXX worker?”
Answer “y”. And then you should be prompted for password and OTP.
After that you can quit the interactive mode with ctrl+c. The runner should now be working fine until the connection drops.</p>
<p>During the starting of the runner, you will probably see a few error/warnings.
First, a warning that the password may be echoed. Ignore it, it should not.</p>
<ol class="arabic simple" start="3">
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">runner</span> <span class="pre">status</span></code> (this should return status of runner as <code class="docutils literal notranslate"><span class="pre">running</span></code>, if everything is set up correctly)</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="example-job-scripts-to-test-add-submit-jobs-to-db-from-your-local-machine">
<h1>Example job scripts to test (Add/Submit jobs to DB from your local machine)<a class="headerlink" href="#example-job-scripts-to-test-add-submit-jobs-to-db-from-your-local-machine" title="Link to this heading">#</a></h1>
<section id="simple-python-job">
<h2>Simple Python job<a class="headerlink" href="#simple-python-job" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jobflow_remote.utils.examples</span> <span class="kn">import</span> <span class="n">add</span>
<span class="kn">from</span> <span class="nn">jobflow_remote</span> <span class="kn">import</span> <span class="n">submit_flow</span>
<span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Flow</span>

<span class="n">job1</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">job2</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">job1</span><span class="o">.</span><span class="n">output</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

<span class="n">flow</span> <span class="o">=</span> <span class="n">Flow</span><span class="p">([</span><span class="n">job1</span><span class="p">,</span> <span class="n">job2</span><span class="p">])</span>

<span class="n">resources</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nodes&quot;</span><span class="p">:</span> <span class="n">N</span><span class="p">,</span> <span class="s2">&quot;partition&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;01:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;ntasks&quot;</span><span class="p">:</span> <span class="n">ntasks</span><span class="p">,</span> <span class="s2">&quot;qverbatim&quot;</span><span class="p">:</span> <span class="s2">&quot;#SBATCH --get-user-env&quot;</span><span class="p">,</span>
             <span class="s2">&quot;mail_user&quot;</span><span class="p">:</span> <span class="s2">&quot;your_email@adress&quot;</span><span class="p">,</span> <span class="s2">&quot;mail_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ALL&quot;</span><span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">submit_flow</span><span class="p">(</span><span class="n">flow</span><span class="p">,</span> <span class="n">worker</span><span class="o">=</span><span class="s2">&quot;example_worker&quot;</span><span class="p">,</span> <span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s2">&quot;test_project&quot;</span><span class="p">))</span> 
<span class="c1"># Do not forget to change worker and project name to what you se tup in the jobflow remote config file.</span>
</pre></div>
</div>
<blockquote>
<div><p>NOTE: We are using <a class="reference external" href="https://matgenix.github.io/qtoolkit/api/qtoolkit.io.slurm.html">Simple Linux Utility for Resource Management (SLURM)</a> specific keywords in our examples.
For <a class="reference external" href="https://matgenix.github.io/qtoolkit/api/qtoolkit.io.pbs.html">Portable Batch System (PBS)</a> specific commands, see <a class="reference external" href="https://matgenix.github.io/qtoolkit/api/qtoolkit.io.pbs.html">here</a>.</p>
</div></blockquote>
</section>
<section id="vasp-relax-job-using-atomate2-workflow">
<h2>VASP relax job using atomate2 workflow<a class="headerlink" href="#vasp-relax-job-using-atomate2-workflow" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jobflow_remote.utils.examples</span> <span class="kn">import</span> <span class="n">add</span>
<span class="kn">from</span> <span class="nn">jobflow_remote</span> <span class="kn">import</span> <span class="n">submit_flow</span>
<span class="kn">from</span> <span class="nn">jobflow</span> <span class="kn">import</span> <span class="n">Flow</span>
<span class="kn">from</span> <span class="nn">mp_api.client</span> <span class="kn">import</span> <span class="n">MPRester</span>
<span class="kn">from</span> <span class="nn">atomate2.vasp.flows.core</span> <span class="kn">import</span> <span class="n">DoubleRelaxMaker</span>
<span class="kn">from</span> <span class="nn">atomate2.vasp.powerups</span> <span class="kn">import</span> <span class="n">update_user_incar_settings</span> 


<span class="n">mpid</span> <span class="o">=</span> <span class="s2">&quot;mp-22862&quot;</span>
<span class="n">mr</span> <span class="o">=</span> <span class="n">MPRester</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s1">&#39;YOUR_MP_API_KEY&#39;</span><span class="p">)</span>
<span class="n">struct</span> <span class="o">=</span> <span class="n">mr</span><span class="o">.</span><span class="n">get_structure_by_material_id</span><span class="p">(</span><span class="n">mpid</span><span class="p">)</span>

<span class="c1"># we use the same structure (mp-22862) here and instantiate the workflow</span>
<span class="n">relax_job</span> <span class="o">=</span> <span class="n">DoubleRelaxMaker</span><span class="p">()</span><span class="o">.</span><span class="n">make</span><span class="p">(</span><span class="n">structure</span><span class="o">=</span><span class="n">struct</span><span class="p">)</span>

<span class="n">relax_job</span> <span class="o">=</span> <span class="n">update_user_incar_settings</span><span class="p">(</span><span class="n">relax_job</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;NPAR&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">})</span>

<span class="c1"># You can also pass exe_config for the worker using exe_config in submit flow. Below is an example </span>
<span class="c1"># exec_config={&quot;pre_run&quot;: &quot;source activate autoplex \n module load slurm_setup \n module load vasp/6.1.2&quot;}</span>

<span class="n">resources</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;nodes&quot;</span><span class="p">:</span> <span class="n">N</span><span class="p">,</span> <span class="s2">&quot;partition&quot;</span><span class="p">:</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;01:00:00&quot;</span><span class="p">,</span> <span class="s2">&quot;ntasks&quot;</span><span class="p">:</span> <span class="n">ntasks</span><span class="p">,</span> <span class="s2">&quot;qverbatim&quot;</span><span class="p">:</span> <span class="s2">&quot;#SBATCH --get-user-env&quot;</span><span class="p">,</span>
             <span class="s2">&quot;mail_user&quot;</span><span class="p">:</span> <span class="s2">&quot;your_email@adress&quot;</span><span class="p">,</span> <span class="s2">&quot;mail_type&quot;</span><span class="p">:</span> <span class="s2">&quot;ALL&quot;</span><span class="p">}</span>

<span class="nb">print</span><span class="p">(</span><span class="n">submit_flow</span><span class="p">(</span><span class="n">relax_job</span><span class="p">,</span> <span class="n">worker</span><span class="o">=</span><span class="s2">&quot;example_worker&quot;</span><span class="p">,</span> <span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">,</span> <span class="n">project</span><span class="o">=</span><span class="s2">&quot;test_project&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>It is crucial to set <code class="docutils literal notranslate"><span class="pre">&quot;qverbatim&quot;:</span> <span class="pre">&quot;#SBATCH</span> <span class="pre">--get-user-env&quot;</span></code> to make sure the same environment is used on your remote cluster.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="setting-different-workers-for-different-job-types">
<h1>Setting different workers for different job types<a class="headerlink" href="#setting-different-workers-for-different-job-types" title="Link to this heading">#</a></h1>
<p>This is very much similar to how we do in atomate2, jobflow-remote provides a specific utility for this.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jobflow_remote</span> <span class="kn">import</span> <span class="n">set_run_config</span>
</pre></div>
</div>
<p>An example use case can be found <a class="reference external" href="https://matgenix.github.io/jobflow-remote/user/tuning.html#jobconfig">here</a></p>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="querying-completed-jobs-from-db-using-jobflow-remote-python-api">
<h1>Querying completed jobs from DB using jobflow-remote Python API<a class="headerlink" href="#querying-completed-jobs-from-db-using-jobflow-remote-python-api" title="Link to this heading">#</a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jobflow_remote</span> <span class="kn">import</span> <span class="n">get_jobstore</span>

<span class="n">js</span> <span class="o">=</span> <span class="n">get_jobstore</span><span class="p">(</span><span class="n">project_name</span><span class="o">=</span><span class="s1">&#39;YOUR_PROJECT_NAME&#39;</span><span class="p">)</span> 
<span class="n">js</span><span class="o">.</span><span class="n">connect</span><span class="p">()</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">js</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="n">criteria</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;generate_frequencies_eigenvectors&quot;</span><span class="p">},</span><span class="n">load</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> 
<span class="c1"># example query for completed phonon workflow runs</span>
<span class="c1"># the query methods are the same as in atomate2 basically, </span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">result</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;output&#39;</span><span class="p">][</span><span class="s2">&quot;phonon_bandstructure&quot;</span><span class="p">])</span> 
    <span class="c1"># get phonon banstructure pymatgen object</span>
</pre></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="updating-failed-jobs-time-limit-or-execution-config">
<h1>Updating failed jobs time limit or execution config<a class="headerlink" href="#updating-failed-jobs-time-limit-or-execution-config" title="Link to this heading">#</a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">jobflow_remote.jobs.jobcontroller</span> <span class="kn">import</span> <span class="n">JobController</span>

<span class="n">jc</span> <span class="o">=</span> <span class="n">JobController</span><span class="o">.</span><span class="n">from_project_name</span><span class="p">(</span><span class="n">project_name</span><span class="o">=</span><span class="s1">&#39;YOUR_PROJECT_NAME&#39;</span><span class="p">)</span> <span class="c1"># initialize a job controller</span>

<span class="n">job_docs</span> <span class="o">=</span> <span class="n">jc</span><span class="o">.</span><span class="n">get_jobs_doc</span><span class="p">(</span><span class="n">db_ids</span><span class="o">=</span><span class="s1">&#39;214&#39;</span><span class="p">)</span> <span class="c1"># query job docs based on different criteria </span>
<span class="c1"># (Check documentation to see all available options https://github.com/Matgenix/jobflow-remote/blob/967e7c512f230105b1a82c2227fb101d8d4acb3d/src/jobflow_remote/jobs/jobcontroller.py#L467)</span>

<span class="c1"># get your existing resources</span>
<span class="n">resources</span> <span class="o">=</span> <span class="n">job_docs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">resources</span>

<span class="c1"># update time limit in the retrieved dict (you can update any other keys like partition/ nodes etc as well)</span>
<span class="n">resources</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;8:00:00&#39;</span>

<span class="n">jc</span><span class="o">.</span><span class="n">rerun_job</span><span class="p">(</span><span class="n">db_id</span><span class="o">=</span><span class="n">job_docs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">db_id</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="c1"># important for jobs that are in failed state to reset them first</span>
<span class="n">jc</span><span class="o">.</span><span class="n">set_job_run_properties</span><span class="p">(</span><span class="n">db_ids</span><span class="o">=</span><span class="p">[</span><span class="n">job_docs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">db_id</span><span class="p">],</span> <span class="n">resources</span><span class="o">=</span><span class="n">resources</span><span class="p">)</span> <span class="c1"># this will update the DB entry</span>
</pre></div>
</div>
<blockquote>
<div><p>IMPORTANT: When you restart VASP calculations, make sure to move the old VASP files somewhere else,
because jobflow-remote will restart your calculation in the same directory and that leads to some clash of old and new files.</p>
</div></blockquote>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="update-pre-exsiting-job-input-parameters-in-the-db">
<h1>Update pre-exsiting job input parameters in the DB<a class="headerlink" href="#update-pre-exsiting-job-input-parameters-in-the-db" title="Link to this heading">#</a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Note that this way is bit involved and you need to find exact structure of your nested DB entry based on type of maker used</span>

<span class="c1"># Following is an example for failed vasp job where NPAR and ALGO tags in DB entry are updated</span>
<span class="kn">from</span> <span class="nn">jobflow_remote.jobs.jobcontroller</span> <span class="kn">import</span> <span class="n">JobController</span>

<span class="n">jc</span> <span class="o">=</span> <span class="n">JobController</span><span class="o">.</span><span class="n">from_project_name</span><span class="p">(</span><span class="n">project_name</span><span class="o">=</span><span class="s1">&#39;YOUR_PROJECT_NAME&#39;</span><span class="p">)</span>

<span class="n">job_collection</span> <span class="o">=</span> <span class="n">jc</span><span class="o">.</span><span class="n">db</span><span class="o">.</span><span class="n">jobs</span> <span class="c1"># get jobs collection from mongoDB</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">job_collection</span><span class="o">.</span><span class="n">find</span><span class="p">({</span><span class="s1">&#39;db_id&#39;</span><span class="p">:</span> <span class="s1">&#39;214&#39;</span><span class="p">}):</span>
    <span class="n">job_dict</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;_id&#39;</span><span class="p">]</span> <span class="c1"># get object id in mongodb (this is used to as filter)</span>
    <span class="n">incar_settings</span> <span class="o">=</span> <span class="n">i</span><span class="p">[</span><span class="s1">&#39;job&#39;</span><span class="p">][</span><span class="s1">&#39;function&#39;</span><span class="p">][</span><span class="s1">&#39;@bound&#39;</span><span class="p">][</span><span class="s1">&#39;input_set_generator&#39;</span><span class="p">][</span><span class="s1">&#39;user_incar_settings&#39;</span><span class="p">]</span> <span class="c1"># get existing user incar settings</span>

<span class="n">incar_settings</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;NPAR&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;ALGO&#39;</span><span class="p">:</span> <span class="s1">&#39;FAST&#39;</span><span class="p">})</span> <span class="c1"># now update incar settings here as per requirement</span>
<span class="n">job_collection</span><span class="o">.</span><span class="n">update_one</span><span class="p">({</span><span class="s1">&#39;_id&#39;</span><span class="p">:</span> <span class="n">job_dict</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;$set&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;job.function.@bound.input_set_generator.user_incar_settings&#39;</span> <span class="p">:</span> <span class="n">incar_settings</span><span class="p">}})</span>

<span class="nb">print</span><span class="p">(</span><span class="n">jc</span><span class="o">.</span><span class="n">get_jobs_doc</span><span class="p">(</span><span class="n">db_ids</span><span class="o">=</span><span class="s1">&#39;214&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">job</span><span class="o">.</span><span class="n">maker</span><span class="o">.</span><span class="n">input_set_generator</span><span class="o">.</span><span class="n">user_incar_settings</span><span class="p">)</span> <span class="c1"># check if entries are updated</span>
</pre></div>
</div>
<blockquote>
<div><p>IMPORTANT: When you restart VASP calculations, make sure to move the old VASP files somewhere else,
because jobflow-remote will restart your calculation in the same directory and that leads to some clash of old and new files.</p>
</div></blockquote>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="some-useful-commands">
<h1>Some useful commands<a class="headerlink" href="#some-useful-commands" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">job</span> <span class="pre">list</span></code> (list jobs in the DB)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">flow</span> <span class="pre">list</span></code> (list of flows in the DB)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">job</span> <span class="pre">info</span> <span class="pre">jobid</span></code> (provides some info of job like workdir, error info if it failed)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">flow</span> <span class="pre">delete</span> <span class="pre">-did</span> <span class="pre">db_id</span></code> (deletes flow from DB)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">flow</span> <span class="pre">-h</span></code> or <code class="docutils literal notranslate"><span class="pre">jf</span> <span class="pre">job</span> <span class="pre">-h</span></code> for checking other options</p></li>
</ol>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="some-useful-links">
<h1>Some useful links<a class="headerlink" href="#some-useful-links" title="Link to this heading">#</a></h1>
<ol class="arabic simple">
<li><p>Check slurm.py for finding different available options you can set for resources dict <a class="reference external" href="https://github.com/Matgenix/qtoolkit/tree/develop/src/qtoolkit/io">here</a></p></li>
<li><p>More details on project config and settings can be found <a class="reference external" href="https://matgenix.github.io/jobflow-remote/user/projectconf.html">here</a></p></li>
<li><p>Details on different setup options <a class="reference external" href="https://matgenix.github.io/jobflow-remote/user/install.html">here</a></p></li>
</ol>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Jobflow-remote setup</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#on-your-local-machine">on your local machine</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#on-your-remote-cluster">on your remote cluster</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changes-to-be-done-in-the-config-file-on-your-local-machine">Changes to be done in the config file - on your local machine</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#check-if-your-setup-works-correctly">Check if your setup works correctly</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started">Getting started</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#example-job-scripts-to-test-add-submit-jobs-to-db-from-your-local-machine">Example job scripts to test (Add/Submit jobs to DB from your local machine)</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-python-job">Simple Python job</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#vasp-relax-job-using-atomate2-workflow">VASP relax job using atomate2 workflow</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#setting-different-workers-for-different-job-types">Setting different workers for different job types</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#querying-completed-jobs-from-db-using-jobflow-remote-python-api">Querying completed jobs from DB using jobflow-remote Python API</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-failed-jobs-time-limit-or-execution-config">Updating failed jobs time limit or execution config</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#update-pre-exsiting-job-input-parameters-in-the-db">Update pre-exsiting job input parameters in the DB</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#some-useful-commands">Some useful commands</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#some-useful-links">Some useful links</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Christina Ertural, Janine George, Aakash A. Naik (alphabetical order)
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, autoplex development team.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>